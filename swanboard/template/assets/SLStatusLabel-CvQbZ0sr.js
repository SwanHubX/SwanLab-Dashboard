import{_ as e,u as t,L as a,i as n,c as l,o as s,a as i,b as o,t as r,T as d,U as c,q as u,e as p,w as m,g as v,f,V as h,m as g,A as y,D as b,C as x,W as _,F as $,N as w,K as j,r as S,X as k}from"./index-CSrWMW-P.js";import{_ as C}from"./SLLoading-DNmSjfVT.js";const L={class:"text-xl font-semibold"},V={class:"relative pt-4"},E={class:"font-semibold pb-3"},I=["placeholder"],U={class:"tip text-negative-default"},q={class:"relative"},D={class:"font-semibold pt-5 pb-3"},B=["placeholder"],N={class:"tip text-negative-default"},T={class:"flex justify-end pt-10"},W=100,z=255,A=e({__name:"EditorWrap",props:{type:String},emits:["confirm"],setup(e,{emit:x}){const _=t(),$=a(),w=e,j=x,S=n({name:"project"===w.type?_.name:$.name,description:"project"===w.type?_.description:$.description}),k=n({name:"",description:""}),A=l((()=>!(S.value.name.length>W))),F=l((()=>{var e;return!S.value.description||!((null==(e=S.value.description)?void 0:e.length)>z)})),K=n(!1),X=async()=>{if(k.value={name:"",description:""},"project"===w.type&&!A.value)return g.warning("invalid project name"),k.value.name="too long or invalid characters";if(!A.value)return g.warning("invalid experiment name"),k.value.name="too long or invalid characters";if(!F.value)return g.warning("invalid description"),k.value.description="invalid description";if(S.value.name.trim()===_.name&&S.value.description===_.description)return k.value.name="nothing changed in project config";if(S.value.name.trim()===$.name&&S.value.description===$.description)return k.value.name="nothing changed in experiment config";let e=!1;"experiment"===w.type&&_.experiments.forEach((t=>{S.value.name===t.name&&S.value.name!==$.name&&(e=!0,k.value.name="The experiment name is duplicated")})),e||(K.value=!0,j("confirm",S.value,(()=>{K.value=!1,g.success(y("common.config-editor.save.success"))})))};return(t,a)=>{var n;const l=b;return s(),i("form",{class:"w-full",onSubmit:h(X,["prevent"])},[o("h1",L,r(t.$t(`common.config-editor.title.${e.type}`)),1),o("div",V,[o("h2",E,r(t.$t(`common.config-editor.sub-title.${e.type}.name`)),1),d(o("input",{type:"text",class:"input","onUpdate:modelValue":a[0]||(a[0]=e=>S.value.name=e),placeholder:`edit your ${e.type} name here`,maxlength:W,pattern:"^(?!\\s+$).*$",required:""},null,8,I),[[c,S.value.name]]),o("p",{class:u(["absolute bottom-[-20px] text-xs right-0",0===S.value.name.length||S.value.name.length===W?"text-negative-default":""])},r(`${S.value.name.length} / 100`),3),o("span",U,r(k.value.name),1)]),o("div",q,[o("h2",D,r(t.$t(`common.config-editor.sub-title.${e.type}.desc`)),1),d(o("textarea",{class:"input",rows:"10","onUpdate:modelValue":a[1]||(a[1]=e=>S.value.description=e),placeholder:`edit your ${e.type} description here`,maxlength:z},null,8,B),[[c,S.value.description]]),o("p",{class:u(["absolute bottom-[-20px] text-xs right-0",(null==(n=S.value.description)?void 0:n.length)===z?"text-negative-default":""])},r(`${S.value.description?S.value.description.length:0} / 255`),3),o("span",N,r(k.value.description),1)]),o("div",T,[p(l,{type:"submit",theme:"primary",class:"p-2 rounded flex items-center",disabled:K.value},{default:m((()=>[K.value?(s(),v(C,{key:0,size:"4"})):f("",!0),o("span",null,r(t.$t("common.config-editor.save."+(K.value?"savimg":"default"))),1)])),_:1},8,["disabled"])])],32)}}},[["__scopeId","data-v-477538f6"]]),F={__name:"ConfigEditor",props:{type:{type:String,validator:e=>["project","experiment"].includes(e)},disabled:{type:Boolean,default:!1}},emits:["modify"],setup(e,{emit:t}){const a=n(!1),l=t,o=async(e,t)=>{l("modify",e,(()=>{a.value=!1,t()}))};return(t,n)=>{const l=b;return s(),i($,null,[p(l,{class:"px-3 py-1.5 border-none !text-dimmest rounded",theme:"primary",hollow:"",disabled:e.disabled,"disabled-tip":t.$t("common.config-editor.not-allowed"),onClick:n[0]||(n[0]=e=>a.value=!0)},{default:m((()=>[p(x,{icon:"modify",class:"w-4 h-4"})])),_:1},8,["disabled","disabled-tip"]),p(_,{class:"px-10 py-6","max-w":"550",modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=e=>a.value=e)},{default:m((()=>[p(A,{type:e.type,onConfirm:o},null,8,["type"])])),_:1},8,["modelValue"])],64)}}},K={class:"text-sm flex items-center gap-2"},X={class:"md:block hidden"},G=e({__name:"DeleteButton",props:{type:String,validator:e=>["project","experiment"].includes(e)},emits:["confirm","cancel"],setup(e,{emit:t}){const a=e,n=t,l=()=>{w(y(`common.delete.title.${a.type}`),y(`common.delete.content.${a.type}`),{}).then((()=>{n("confirm")}))};return(e,t)=>(s(),v(b,{onClick:l,theme:"negative",hollow:"","disabled-tip":e.$t("common.delete.not-allowed")},{default:m((()=>[o("div",K,[p(x,{icon:"trash",class:"w-4 h-4"}),o("span",X,r(e.$t("common.delete.button")),1)])])),_:1},8,["disabled-tip"]))}},[["__scopeId","data-v-9e20cdab"]]),H=e({__name:"SLStatusLabel",props:{status:{type:Number,required:!0},url:{type:String,default:""}},setup(e){const t=j(),a=e,n=l((()=>{let e,t;switch(a.status){case 0:e="running",t="circle-fill";break;case 1:e="finished",t="success";break;case-1:e="crashed",t="error"}if(!e)throw new Error("Invalid status:"+a.status+"in StatusLabel.vue");return{class:e,icon:t}})),i=l((()=>a.url?"a":"div")),o=()=>{a.url&&t.push(a.url)};return(t,a)=>{const l=x;return s(),v(k(i.value),{class:u(["sl-status-label",n.value.class]),href:e.url,onClick:h(o,["prevent"])},{default:m((()=>[p(l,{icon:n.value.icon},null,8,["icon"]),S(t.$slots,"default",{},void 0,!0)])),_:3},8,["class","href"])}}},[["__scopeId","data-v-b6e5701f"]]);export{G as D,F as _,H as a};
